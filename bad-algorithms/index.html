
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://virgesmith.github.io/bad-algorithms/">
      
      
        <meta name="author" content="Andrew P Smith">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.5">
    
    
      
        <title>Bad algorithms - Random Rants</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.21aed14c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.196e0c26.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-purple">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bad-algorithms" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://virgesmith.github.io" title="Random Rants" class="md-header-nav__button md-logo" aria-label="Random Rants">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Random Rants
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Bad algorithms
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/virgesmith/virgesmith.github.io/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://virgesmith.github.io" title="Random Rants" class="md-nav__button md-logo" aria-label="Random Rants">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Random Rants
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/virgesmith/virgesmith.github.io/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" checked>
    <label class="md-nav__link" for="nav-1">
      Articles
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Articles" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon"></span>
        Articles
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Bad algorithms
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Bad algorithms
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#exponential-complexity" class="md-nav__link">
    Exponential complexity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#worse-than-exponential-algorithms" class="md-nav__link">
    Worse-than-exponential algorithms
  </a>
  
    <nav class="md-nav" aria-label="Worse-than-exponential algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hyperoperations" class="md-nav__link">
    Hyperoperations
  </a>
  
    <nav class="md-nav" aria-label="Hyperoperations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addition" class="md-nav__link">
    Addition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiplication" class="md-nav__link">
    Multiplication
  </a>
  
    <nav class="md-nav" aria-label="Multiplication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hyperexponential-complexity" class="md-nav__link">
    Hyperexponential complexity
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../anatomy/" class="md-nav__link">
      Anatomy of a successful research software project
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../about/" class="md-nav__link">
      About me
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#exponential-complexity" class="md-nav__link">
    Exponential complexity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#worse-than-exponential-algorithms" class="md-nav__link">
    Worse-than-exponential algorithms
  </a>
  
    <nav class="md-nav" aria-label="Worse-than-exponential algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hyperoperations" class="md-nav__link">
    Hyperoperations
  </a>
  
    <nav class="md-nav" aria-label="Hyperoperations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addition" class="md-nav__link">
    Addition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiplication" class="md-nav__link">
    Multiplication
  </a>
  
    <nav class="md-nav" aria-label="Multiplication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hyperexponential-complexity" class="md-nav__link">
    Hyperexponential complexity
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/virgesmith/virgesmith.github.io/edit/master/docs/bad-algorithms.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="bad-algorithms">Bad algorithms<a class="headerlink" href="#bad-algorithms" title="Permanent link">¶</a></h1>
<p>I want to have some fun(?) implementing insanely slow algorithms for simple operations, but first here's a classic example of how not to implement an algorithm to set the scene.</p>
<h2 id="exponential-complexity">Exponential complexity<a class="headerlink" href="#exponential-complexity" title="Permanent link">¶</a></h2>
<p>The Fibonacci series is an integer sequence beginning <span class="arithmatex">\(0, 1\)</span> where every successive digit is the sum of the previous two:</p>
<div class="arithmatex">\[0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55...\]</div>
<p>The definition</p>
<div class="arithmatex">\[F\big(n\big) = \left\{\begin{matrix}
&amp; n &amp; n \in {0,1} \\
&amp; F\big(n-1\big) + F\big(n-2\big) &amp; n &gt; 1
\end{matrix}\right.\]</div>
<p>lends itself directly to a recursive implementation, e.g. in python:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">fib_recursive</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">n</span>
  <span class="k">return</span> <span class="n">fib_recursive</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib_recursive</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>

<p>For each call to <code>fib_recursive</code> up to <strong>two</strong> further calls to the function are made and thus the call stack will grow exponentially. For large <span class="arithmatex">\(n\)</span> this will cause the program to run very slooooow if it doesn't run out of resources entirely and crash. This table illustrates the execution time for a small range of <span class="arithmatex">\(n\)</span>:</p>
<table>
<thead>
<tr>
<th align="right">n</th>
<th align="right">F(n)</th>
<th align="right">Time(ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">10</td>
<td align="right">55</td>
<td align="right">0.0851154</td>
</tr>
<tr>
<td align="right">15</td>
<td align="right">610</td>
<td align="right">0.911951</td>
</tr>
<tr>
<td align="right">20</td>
<td align="right">6765</td>
<td align="right">9.92441</td>
</tr>
<tr>
<td align="right">25</td>
<td align="right">75025</td>
<td align="right">111.743</td>
</tr>
<tr>
<td align="right">30</td>
<td align="right">832040</td>
<td align="right">1224.36</td>
</tr>
</tbody>
</table>
<p>In graphical form it's clear that execution time in terms of <span class="arithmatex">\(n\)</span> is linear <em>on a log scale</em> and thus growing <strong>exponentially</strong>:</p>
<p><img alt="fib_recursive" src="../img/fib_recursive_time.png" /></p>
<p>If you compute the slope, it's about ~1.618, a.k.a the Golden ratio <span class="arithmatex">\(\phi\)</span> which just happens to be the value the that ratio of successive values in the sequence tends to.  </p>
<p>As you can see, for even fairly small <span class="arithmatex">\(n\)</span> the function is taking prohibitively long to run. The number of times the function is actually called for a given value of <span class="arithmatex">\(n\)</span> is a close relation of the sequence itself (unsurprisingly):</p>
<div class="arithmatex">\[C\big(n\big) = \left\{\begin{matrix}
&amp; 1 &amp; n \in {0,1} \\
&amp; 1 + C\big(n-1\big) + C\big(n-2\big) &amp; n &gt; 1
\end{matrix}\right.\]</div>
<p>which is larger than <span class="arithmatex">\(F\)</span> but grows at exactly the same rate, <span class="arithmatex">\(\phi\)</span>.</p>
<p>In algorithmic complexity terms, this is known as <em>exponential time complexity</em> and should be avoided at all costs. The point I'm trying to make here is that the obvious (but perhaps naiive) implementation of a mathematical function is not always the best approach, and a good (research or otherwise) software engineer should know this.</p>
<p>So lets try again. Python has a feature called <em>generators</em> which are ideal for computing sequences. The generator holds hold some state, and the next time you call it, it just picks up where it left off (the <code>yield</code> statement - this construct is known as a <em>coroutine</em>). You could implement is like this:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">fibgen</span><span class="p">():</span>
  <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">yield</span> <span class="n">a</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>

<span class="k">def</span> <span class="nf">fib_generator</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="n">fg</span> <span class="o">=</span> <span class="n">fibgen</span><span class="p">()</span>
  <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span> <span class="nb">next</span><span class="p">(</span><span class="n">fg</span><span class="p">)</span> 
  <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">fg</span><span class="p">)</span>
</code></pre></div>

<p>And the execution time is vastly improved:</p>
<table>
<thead>
<tr>
<th align="right">n</th>
<th align="right">F(n)</th>
<th align="right">Time(ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">10</td>
<td align="right">55</td>
<td align="right">0.00524521</td>
</tr>
<tr>
<td align="right">20</td>
<td align="right">6765</td>
<td align="right">0.00333786</td>
</tr>
<tr>
<td align="right">30</td>
<td align="right">832040</td>
<td align="right">0.00429153</td>
</tr>
<tr>
<td align="right">40</td>
<td align="right">102334155</td>
<td align="right">0.00476837</td>
</tr>
<tr>
<td align="right">50</td>
<td align="right">12586269025</td>
<td align="right">0.00572205</td>
</tr>
<tr>
<td align="right">60</td>
<td align="right">1548008755920</td>
<td align="right">0.00691414</td>
</tr>
<tr>
<td align="right">70</td>
<td align="right">190392490709135</td>
<td align="right">0.00762939</td>
</tr>
<tr>
<td align="right">80</td>
<td align="right">23416728348467685</td>
<td align="right">0.00858307</td>
</tr>
<tr>
<td align="right">90</td>
<td align="right">2880067194370816120</td>
<td align="right">0.00977516</td>
</tr>
</tbody>
</table>
<p>The data is a little noiser this time because the execution time is so much faster, but theres a clear linear trend now.</p>
<p><img alt="fib_generator" src="../img/fib_generator_time.png" /></p>
<p>So, we've started with a worse-than-polynomial <span class="arithmatex">\(O(\phi^n)\)</span> algorithm and turned it into an <span class="arithmatex">\(O(n)\)</span> one. Great!</p>
<h2 id="worse-than-exponential-algorithms">Worse-than-exponential algorithms<a class="headerlink" href="#worse-than-exponential-algorithms" title="Permanent link">¶</a></h2>
<p>You don't hear much about such things, I suppose largely because they're utterly impractical. I haven't come across any problems that <em>require</em> such algorithms, but I'm sure plenty must exist.</p>
<p>So, perversely I decided to explore how I could contrive to solve simple problems with hopelessly inefficient algorithms and try and work out how long operations would take using them. Obviously actually running, and even testing, them is largely impractical.</p>
<h3 id="hyperoperations"><a href="https://en.wikipedia.org/wiki/Hyperoperation">Hyperoperations</a><a class="headerlink" href="#hyperoperations" title="Permanent link">¶</a></h3>
<p>Starting two integers <span class="arithmatex">\(a\)</span> and <span class="arithmatex">\(b\)</span>, we formulate arithmetic operations on them as a chain of binary operations starting with the basic operation of incrementing ("succession"):</p>
<table>
<thead>
<tr>
<th>Level</th>
<th>Operation</th>
<th>&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Succession</td>
<td><span class="arithmatex">\((a, b) \rightarrow a + 1\)</span></td>
</tr>
<tr>
<td>1</td>
<td>Addition</td>
<td><span class="arithmatex">\((a, b) \rightarrow a + b\)</span></td>
</tr>
<tr>
<td>2</td>
<td>Multiplication</td>
<td><span class="arithmatex">\((a, b) \rightarrow ab\)</span></td>
</tr>
<tr>
<td>3</td>
<td>Exponentiation</td>
<td><span class="arithmatex">\((a, b) \rightarrow a^b \equiv a \uparrow b\)</span></td>
</tr>
<tr>
<td>4</td>
<td>Tetration</td>
<td><span class="arithmatex">\((a, b) \rightarrow \underbrace{a^{a^{\unicode{x22F0}^a}}}_b \equiv a \uparrow \uparrow b\)</span></td>
</tr>
<tr>
<td>4</td>
<td>Pentation</td>
<td><span class="arithmatex">\((a, b) \rightarrow a \uparrow^3 b\)</span></td>
</tr>
<tr>
<td>4</td>
<td>Hexation</td>
<td><span class="arithmatex">\((a, b) \rightarrow a \uparrow^4 b\)</span></td>
</tr>
</tbody>
</table>
<p>So each level is just doing <span class="arithmatex">\(b\)</span> iterations of the previous level. And you can keep going forever but you need some unusual mathematical notation. The table above introduces Knuth's <a href="https://en.wikipedia.org/wiki/Knuth%27s_up-arrow_notation">up-arrow</a> notation.</p>
<p>I can code up all of these operations in terms of iterated calls to the succession function:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">suc</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span>

<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">suc</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">m</span>

<span class="k">def</span> <span class="nf">mul</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
  <span class="n">m_</span> <span class="o">=</span> <span class="n">m</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">m_</span><span class="p">,</span><span class="n">m</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">m</span>

<span class="k">def</span> <span class="nf">pow</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
  <span class="n">m_</span> <span class="o">=</span> <span class="n">m</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">mul</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">m_</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">m</span>

<span class="k">def</span> <span class="nf">tet</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
  <span class="n">m_</span> <span class="o">=</span> <span class="n">m</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">m_</span><span class="p">,</span><span class="n">m</span><span class="p">)</span> <span class="c1"># note switch of args</span>
  <span class="k">return</span> <span class="n">m</span>

<span class="k">def</span> <span class="nf">pen</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
  <span class="n">m_</span> <span class="o">=</span> <span class="n">m</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">tet</span><span class="p">(</span><span class="n">m_</span><span class="p">,</span><span class="n">m</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">m</span>

<span class="k">def</span> <span class="nf">hex</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
  <span class="n">m_</span> <span class="o">=</span> <span class="n">m</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">pen</span><span class="p">(</span><span class="n">m_</span><span class="p">,</span><span class="n">m</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">m</span>
</code></pre></div>

<p>which gives addition linear complexity, multiplication quadratic, exponentiation exponential, and then we get into unknown territory with pentation and hexation. I'm not sure why I bothered, as I'm not going to be able to run them anyway.</p>
<p>There's also the amusing side effect that adding 1 to 1000000 is much quicker than vice versa.</p>
<p>And, since the only arithmetic operation in all of this is succession, the execution time will be proportional to the value of the result. This is good because in most cases it won't be possible to actually perform the computation, but I can still get a good idea of how long it would take.</p>
<h4 id="addition">Addition<a class="headerlink" href="#addition" title="Permanent link">¶</a></h4>
<p>The results for addition, unsurprisingly, show a clear linear trend, so it's <span class="arithmatex">\(O(n)\)</span>:</p>
<p><img alt="add" src="../img/hyper_add.png" /></p>
<h4 id="multiplication">Multiplication<a class="headerlink" href="#multiplication" title="Permanent link">¶</a></h4>
<p>This time with the <span class="arithmatex">\(y\)</span> axis as the square root of the execution time, again we see the expected linear trend, so we've gone from the inbuilt <span class="arithmatex">\(O(1)\)</span> to <span class="arithmatex">\(O(n^2)\)</span>:</p>
<!--|   n |   mul(n,n) |   Time(ms) |
|----:|-----------:|-----------:|
|  20 |        400 |    1.57976 |
|  40 |       1600 |   11.6971  |
|  60 |       3600 |   30.1907  |
|  80 |       6400 |   68.496   |
| 100 |      10000 |  189.912   |
| 120 |      14400 |  464.125   |
| 140 |      19600 |  498.488   |
| 160 |      25600 |  562.98    |
| 180 |      32400 |  764.926   |
| 200 |      40000 | 1034.76    |-->

<p><img alt="add" src="../img/hyper_mul.png" /></p>
<h5 id="_1"><a class="headerlink" href="#_1" title="Permanent link">¶</a></h5>
<p>And for exponentiation, you can see the runtime is increasing rapidly with <span class="arithmatex">\(n\)</span>:</p>
<table>
<thead>
<tr>
<th align="right">n</th>
<th align="right">pow(n,n)</th>
<th align="right">Time(ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">0.00739098</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">27</td>
<td align="right">0.0143051</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">256</td>
<td align="right">0.151634</td>
</tr>
<tr>
<td align="right">5</td>
<td align="right">3125</td>
<td align="right">2.05684</td>
</tr>
<tr>
<td align="right">6</td>
<td align="right">46656</td>
<td align="right">46.7787</td>
</tr>
<tr>
<td align="right">7</td>
<td align="right">823543</td>
<td align="right">1068.86</td>
</tr>
<tr>
<td align="right">8</td>
<td align="right">16777216</td>
<td align="right">18738.8</td>
</tr>
</tbody>
</table>
<p>and plotting what data we can get, with the y axis on a log scale, shows a linear trend:</p>
<p><img alt="add" src="../img/hyper_exp.png" /></p>
<p>Already the run time is trying my patience, but now I've worked out my algorithms give the right answer and perform as badly as expected, and also that this laptop can do about 3 million succession operations per second. So how does tetration perform?</p>
<h2 id="hyperexponential-complexity">Hyperexponential complexity<a class="headerlink" href="#hyperexponential-complexity" title="Permanent link">¶</a></h2>
<p><span class="arithmatex">\(2^{2^{2^2}} = 2\uparrow\uparrow4 = 65\,536\)</span> takes about 20ms to calculate.</p>
<p><span class="arithmatex">\(3^{3^3} = 3\uparrow\uparrow3 = 7\,625\,597\,484\,987\)</span> will take approximately 29 days to compute.</p>
<p><span class="arithmatex">\(4^{4^4} = 4\uparrow\uparrow3 \approx 1.34 \times 10^{154} \)</span> will take approximately <span class="arithmatex">\(\mathbf{10^{130}}\)</span> <strong>times the age of the universe</strong> to compute.</p>
<p>But if you're in a hurry, <code>python -c "print(4**4**4)"</code> will give you the answer instantaneously &#128521;.</p>
<p>I'd better stop there. I've replaced perfectly good constant-time algorithms with pathologically inefficient linear, quadratic, exponential (and worse) ones. Utterly pointless, but sort of interesting all the same. I'll get my coat...</p>
<p>If you want to see a mind-boggling example of a hyperoperation at a level that is itself an iterated hyperoperation, check out <a href="https://en.wikipedia.org/wiki/Graham%27s_number">Graham's number</a>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
        
          <a href="../anatomy/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Anatomy of a successful research software project
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy 2020 Andrew P Smith
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.7e0ee788.min.js"></script>
      <script src="../assets/javascripts/bundle.b3a72adc.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../js/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>